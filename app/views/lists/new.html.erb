<%= stylesheet_link_tag 'new', media: 'all' %>
<div class="container_main">
  <div class="header">
    <h1>Nova Lista</h1>
  </div>

    <%= form_with model: @list, local: true, html: { onsubmit: "return validateForm(this);" } do |form| %>
        <div class="form-group">
          <%= form.label :name, "Nome da Lista:", style: "font-weight: bold; color: #333; font-size: 20px;" %>
        </div>

        <div class="form-group">
          <%= form.text_field :name, class: "text-field", placeholder: "Digite o nome da lista..." %>
            <div id="error-message" style="display: none;">
              O nome da lista nÃ£o pode estar vazio!
            </div>
        </div>

        <div class="form-group">
          <%= button_tag(type: 'submit', class: "button") do %>
            <%= image_tag('pen.svg', alt: 'Inserir Lista', width: '20', height: '20') %>
            Criar Lista
          <% end %>
        </div>

        <div class="form-group">
           <%= link_to "#{image_tag('voltar.png', alt: 'Voltar', width: '20', height: '20')} Voltar".html_safe, lists_path, class: "button link" %>
        </div>
    <% end %>

    <footer>
      <span class="bottom-right-text ">2</span>
    </footer>
</div>

<script>
  function validateForm(form) {
    const nameInput = form.querySelector("input[name='list[name]']");
    const errorMessage = document.getElementById("error-message");
    const trimmedValue = nameInput.value.trim();

    if (trimmedValue === "") {
      errorMessage.style.display = "block"; 
       setTimeout(() => {
        errorMessage.style.display = "none"; 
      }, 1000);
      return false;

    } else {
      errorMessage.style.display = "none"; 
    }
    
    return true;
  }
</script>