<%= stylesheet_link_tag 'general', media: 'all' %>

<div class="container_main">
  <div class="header">
    <h1>New List</h1>
  </div>

    <%= form_with model: @list, local: true, html: { onsubmit: "return validateForm(this);" } do |form| %>
        <div class="form-group">
          <%= form.label :name, "List Name:", style: "font-weight: bold; color: #333; font-size: 20px;" %>
        </div>

        <div class="form-group">
          <%= form.text_field :name, class: "text-field", placeholder: "Enter the name of the list..." %>
        </div>

        <div id="error-message">
          The list name cannot be empty!
        </div>

        <div class="form-group">
          <%= button_tag(type: 'submit', class: "button") do %>
            <%= image_tag('pen.svg', alt: 'Create list', width: '20', height: '20') %>
            Create list
          <% end %>
        </div>

        <div class="form-group">
           <%= link_to "#{image_tag('voltar.png', alt: 'Back', width: '20', height: '20')} Back".html_safe, lists_path, class: "button link" %>
        </div>
    <% end %>

    <footer>
      <span class="bottom-right-text ">2</span>
    </footer>
</div>

<script>
  function validateForm(form) {
    const nameInput = form.querySelector("input[name='list[name]']");
    const errorMessage = document.getElementById("error-message");
    const trimmedValue = nameInput.value.trim();

    if (trimmedValue === "") {
      errorMessage.style.display = "block"; 
       setTimeout(() => {
        errorMessage.style.display = "none"; 
      }, 1000);
      return false;

    } else {
      errorMessage.style.display = "none"; 
    }
    
    return true;
  }
</script>